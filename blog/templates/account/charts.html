{% extends "base.html" %}

{% block title %}Charts{% endblock %}

{% block content %}
<div id="content" class="p-4 p-md-5 pt-5">
  <h1>Likes Dislike Views Charts on Posts</h1>
  <div id="container" style="width: 75%;">
    <canvas id="pie-chart"></canvas>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <script>
    {% comment %} function getRandomColor() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color; }{% endcomment %}
    var randomColorGenerator = function () { 
    return '#' + (Math.random().toString(16) + '0000000').slice(2, 8); 
      };
    var config = {
      type: 'bar',
      data: {
        datasets: [{
          data: {{ views|safe }},
          label: 'Total Views',
          backgroundColor:randomColorGenerator()
        },
        {
          data:{{likes|safe}},
          label:'total likes',
          type:'bar',
          backgroundColor:randomColorGenerator()
        },
        { data:{{dislike|safe}},
          label:'total dislike',
          type:'bar',
          backgroundColor:randomColorGenerator()
        }],
        labels: {{ labels|safe }}
      },
      options: {
        responsive: true,
        events: ['mousemove'],
        tooltips: {
            mode: 'nearest'
        },
        animation: {
            duration: 3 // general animation time
        },
        hover: {
            animationDuration: 0 // duration of animations when hovering an item
        },
        responsiveAnimationDuration: 0
      }
    };

    window.onload = function() {
      var ctx = document.getElementById('pie-chart').getContext('2d');
      window.myPie = new Chart(ctx, config);
    };

  </script>

  {% endblock %}

